<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Browse Items | CampusFind</title>
  <!-- Tailwind CSS v3 with Plugins -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <style data-purpose="custom-layout">
    /* Custom sizing for specific components that need precise dimensions */
    .item-card-image {
      width: 300px;
      min-width: 300px;
      height: 200px;
      object-fit: cover;
    }

    /* Ensure the main container feels spacious on desktop */
    .results-container {
      max-width: 1200px;
    }
  </style>
  <style data-purpose="typography">
    /* Base typography enhancements */
    body {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-900">
  <!-- BEGIN: MainHeader -->
  <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <div class="w-8 h-8 bg-indigo-600 rounded flex items-center justify-center">
          <span class="text-white font-bold">C</span>
        </div>
        <span class="text-xl font-bold tracking-tight text-gray-900">CampusFind</span>
      </div>
      <nav class="hidden md:flex space-x-8">
        <a class="text-gray-500 hover:text-indigo-600 font-medium" href="#">Report Item</a>
        <a class="text-indigo-600 font-semibold border-b-2 border-indigo-600" href="#">Browse Items</a>
        <a class="text-gray-500 hover:text-indigo-600 font-medium" href="#">My Claims</a>
      </nav>
      <div class="flex items-center gap-4">
        {% if session.get('user') %}
        <a href="/dashboard" class="text-sm font-medium text-gray-700">Dashboard</a>
        <a href="/logout"
          class="bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-700 transition">Logout</a>
        {% else %}
        <a href="/login" class="text-sm font-medium text-gray-700">Login</a>
        <a href="/register"
          class="bg-indigo-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-indigo-700 transition">Sign
          Up</a>
        {% endif %}
      </div>
    </div>
  </header>
  <!-- END: MainHeader -->
  <main class="results-container mx-auto px-4 py-8">
    <!-- BEGIN: SearchSection -->
    <section class="mb-8" data-purpose="search-interface">
      <h1 class="text-3xl font-extrabold text-gray-900 mb-6">Browse Campus Items</h1>
      <div class="relative max-w-2xl">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <!-- Search Icon -->
          <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg">
            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke-linecap="round" stroke-linejoin="round"
              stroke-width="2"></path>
          </svg>
        </div>
        <input
          class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm shadow-sm"
          id="main-search" placeholder="Search for lost keys, water bottles, electronics..." type="text" />
      </div>
    </section>
    <!-- END: SearchSection -->
    <!-- BEGIN: FilterRow -->
    <section class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm mb-8" data-purpose="filter-controls">
      <div class="grid grid-cols-1 md:grid-cols-5 gap-4 items-end">
        <div>
          <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1"
            for="filter-type">Type</label>
          <select class="block w-full rounded-md border-gray-300 text-sm focus:ring-indigo-500 focus:border-indigo-500"
            id="filter-type">
            <option>All Types</option>
            <option>Lost</option>
            <option>Found</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1"
            for="filter-category">Category</label>
          <select class="block w-full rounded-md border-gray-300 text-sm focus:ring-indigo-500 focus:border-indigo-500"
            id="filter-category">
            <option>All Categories</option>
            <option>Electronics</option>
            <option>Clothing</option>
            <option>Accessories</option>
            <option>Books/Documents</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1"
            for="filter-status">Status</label>
          <select class="block w-full rounded-md border-gray-300 text-sm focus:ring-indigo-500 focus:border-indigo-500"
            id="filter-status">
            <option>Active</option>
            <option>Resolved</option>
            <option>Pending Claim</option>
          </select>
        </div>
        <div>
          <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1"
            for="filter-date">Date</label>
          <input class="block w-full rounded-md border-gray-300 text-sm focus:ring-indigo-500 focus:border-indigo-500"
            id="filter-date" type="date" />
        </div>
        <div>
          <button
            class="w-full bg-gray-900 text-white px-4 py-2 rounded-md text-sm font-bold hover:bg-gray-800 transition">
            Apply Filters
          </button>
        </div>
      </div>
    </section>
    <!-- END: FilterRow -->
    <!-- BEGIN: ResultsHeader -->
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-lg font-medium text-gray-700">Showing <span class="font-bold">24</span> results</h2>
      <div class="flex items-center text-sm text-gray-500">
        <span>Sort by:</span>
        <select class="ml-2 border-none bg-transparent font-semibold text-gray-900 focus:ring-0 cursor-pointer">
          <option>Newest First</option>
          <option>Oldest First</option>
        </select>
      </div>
    </div>
    <!-- END: ResultsHeader -->
    <!-- BEGIN: ItemList -->
    <section class="space-y-6" data-purpose="item-results-list">
      {% for item in items %}
      <article
        class="bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition flex flex-col md:flex-row"
        data-purpose="item-card">
        <div class="flex-shrink-0">
          {% if item.image_filename %}
          <img alt="{{ item.name }}" class="item-card-image"
            src="{{ url_for('static', filename='uploads/' + item.image_filename) }}" />
          {% else %}
          <div class="item-card-image flex items-center justify-center bg-gray-200">
            <span class="material-icons text-gray-400 text-6xl">image_not_supported</span>
          </div>
          {% endif %}
        </div>
        <div class="p-6 flex flex-col justify-between flex-grow">
          <div>
            <div class="flex justify-between items-start mb-2">
              <h3 class="text-xl font-bold text-gray-900">{{ item.name }}</h3>
              <div class="flex gap-2">
                <span
                  class="px-2.5 py-0.5 rounded-full text-xs font-medium {% if item.type == 'found' %}bg-green-100 text-green-800{% else %}bg-orange-100 text-orange-800{% endif %} capitalize">{{
                  item.type }}</span>
                <span class="px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize">{{
                  item.category }}</span>
              </div>
            </div>
            <p class="text-gray-600 text-sm line-clamp-2 mb-4">
              {{ item.description }}
            </p>
            <div class="space-y-1">
              <div class="flex items-center text-sm text-gray-500">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewbox="0 0 24 24">
                  <path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                    stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
                  <path d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" stroke-linecap="round" stroke-linejoin="round"
                    stroke-width="2"></path>
                </svg>
                {{ item.location }}
              </div>
              <div class="flex items-center text-sm text-gray-500">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewbox="0 0 24 24">
                  <path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                    stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
                </svg>
                {{ item.date }} {% if item.time %}{{ item.time }}{% endif %}
              </div>
              {% if item.status == 'returned' %}
              <div
                class="inline-flex mt-2 px-2 py-1 bg-gray-100 border border-gray-300 text-xs text-gray-600 font-bold rounded">
                RETURNED</div>
              {% endif %}
            </div>
          </div>
          <div class="mt-6 flex justify-end">
            {% if session.get('role') == 'staff' and item.status == 'active' and item.type == 'found' %}
            <a href="/claim"
              class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg font-semibold text-sm transition shadow-sm inline-block">
              Process Claim
            </a>
            {% else %}
            <button class="bg-gray-200 text-gray-700 px-6 py-2 rounded-lg font-semibold text-sm transition shadow-sm"
              disabled>
              View Only
            </button>
            {% endif %}
          </div>
        </div>
      </article>
      {% else %}
      <div class="text-center py-10 text-gray-500 text-lg">No items found in the database.</div>
      {% endfor %}
    </section>
    <!-- END: ItemList -->
    <!-- BEGIN: Pagination -->
    <div class="mt-12 flex justify-center" data-purpose="pagination">
      <nav aria-label="Pagination" class="inline-flex rounded-md shadow-sm -space-x-px">
        <a class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"
          href="#">
          <span class="sr-only">Previous</span>
          <svg class="h-5 w-5" fill="currentColor" viewbox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path clip-rule="evenodd"
              d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
              fill-rule="evenodd"></path>
          </svg>
        </a>
        <a aria-current="page"
          class="z-10 bg-indigo-50 border-indigo-500 text-indigo-600 relative inline-flex items-center px-4 py-2 border text-sm font-medium"
          href="#">1</a>
        <a class="bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium"
          href="#">2</a>
        <a class="bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium"
          href="#">3</a>
        <a class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"
          href="#">
          <span class="sr-only">Next</span>
          <svg class="h-5 w-5" fill="currentColor" viewbox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path clip-rule="evenodd"
              d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
              fill-rule="evenodd"></path>
          </svg>
        </a>
      </nav>
    </div>
    <!-- END: Pagination -->
  </main>
  <!-- BEGIN: MainFooter -->
  <footer class="bg-white border-t border-gray-200 mt-20 py-8">
    <div class="max-w-7xl mx-auto px-4 text-center">
      <p class="text-gray-500 text-sm">Â© 2023 CampusFind. All rights reserved.</p>
      <div class="mt-2 flex justify-center space-x-6">
        <a class="text-xs text-gray-400 hover:text-gray-600" href="#">Privacy Policy</a>
        <a class="text-xs text-gray-400 hover:text-gray-600" href="#">Terms of Service</a>
        <a class="text-xs text-gray-400 hover:text-gray-600" href="#">Contact Support</a>
      </div>
    </div>
  </footer>
  <!-- END: MainFooter -->
</body>

</html>